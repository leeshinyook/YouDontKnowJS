# 스코프란?

> 프로그래밍 언어의 기본 패러다임 : 하나는 변수에 값을 저장하고 저장된 값을 가져다 쓰고 수정하는 것이다.

> 질문?
>
> > 변수는 어디에 살아있는가? 변수는 어디에 저장되는가?  
> > 필요할 때 프로그램은 어떻게 변수를 찾는가?

    정의 : 특정 장소에 변수를 저장하고 나중에 그 변수를 찾는 데는 잘 정의된 규칙이 필요하고 이를 스코프라고 한다.

## 컴파일러 이론

> 자바스크립프는 동적, 인터프리티언어로 분류하나 사실은 `컴파일러 언어`이다.

- 컴파일러 언어의 처리과정(대략 3단계)
  1. 토크나이징 / 렉싱
  2. 파싱
  3. 코드 생성

### 1. 토크나이징 / 렉싱

- 토크나이징
  - 문자열을 나누어 `토큰`이라 불리는 의미 있는 조각으로 만드는 과정이다.

```javascript
var a = 2;
// 토크나이징
// var
// a
// =
// 2
// ;
// 으로 토큰화한다.
```

- 렉싱
  - 토크나이저가 상태 유지 파싱규칙을 적용해 a가 별개의 토큰인지 다른 토큰의 일부인지를 파악시 렉싱.

### 2. 파싱

- 토큰 배열을 프로그램 문법 구조를 반영하여 중첩 원소를 갖는 트리형태로 바꾸는 과정. => AST(Abstract Syntax Tree), 추상 구문 트리

### 3. 코드 생성

자바스크립트 엔진이 기존 컴파일러와 다른점 : 컴파일레이션을 미리 수행하지 않는다. 즉, 최적화 할 시간이 부족하다.  
`레이지컴파일 (Lazy Compile)`, `핫리컴파일 (Hot Recompile)` 사용

## 스코프 이해하기

- 엔진
  - 프로그램 실행을 책임진다.
- 컴파일러
  - 파싱과 코드생성의 모든 잡일을 도맡아 한다.
- 스코프

  - 선언된 모든 변수검색목록을 작성하고 유지한다. 또한, 엄격한 규칙을 강제하여 현재 실행 코드에서 확인자의 적용방식을 정한다.

## 컴파일러체

    변수가 선언된 적이 있는 지 스코프에서 검색한다.

- LHS (Left-Hand Side) : 대입할 대상
- RHS (RIght-Hand Side) : 대입한 값

```javascript
function foo(a) {
  var b = a;
  return a + b;
}
var c = foo(2);
```

위 코드에서 RHS와 LHS

- RHS
  - foo(2 ...), = a;, a ..., b...
- LHS
  - c = ..., a = 2(암시적 인자 대입), b = ...

## 중첩 스코프

    중첩스코프의 규칙, 현재 스코프에서 변수를 찾고 없다면 상위 스코프로 이동하여 검색한다.

## 오류

변수가 생성되지 않았을 때,  
LHS - ReferenceError, RHS : TypeError가 발생한다.
